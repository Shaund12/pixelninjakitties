<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pixel Ninja Cats — Mint</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="Mint an on-chain pixel-art ninja kitty with enhanced UI and accessibility.">
    
    <!-- Performance and SEO improvements -->
    <meta name="theme-color" content="#0d0d0d">
    <meta name="color-scheme" content="dark">
    
    <!-- Preload critical fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Favicon -->
    <link rel="icon" href="assets/detailed_ninja_cat_64.png">
    
    <!-- Critical CSS first -->
    <link rel="stylesheet" href="css/design-tokens.css">
    <link rel="stylesheet" href="css/buttons.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    
    <!-- Fonts with improved loading -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Enhanced scripts -->
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ethers@6/dist/ethers.umd.min.js"></script>
    
    <!-- Accessibility and focus management -->
    <script>
        // Improve keyboard navigation accessibility
        document.addEventListener('DOMContentLoaded', function() {
            // Track if user is using keyboard for focus management
            let hadKeyboardEvent = true;
            const keyboardThrottleTimeout = 100;
            
            function setHadKeyboardEvent(hadEvent) {
                hadKeyboardEvent = hadEvent;
                document.body.classList.toggle('user-is-tabbing', hadEvent);
            }
            
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Tab') {
                    setHadKeyboardEvent(true);
                }
            });
            
            document.addEventListener('mousedown', function() {
                setHadKeyboardEvent(false);
            });
        });
    </script>
</head>

<body>
    <!-- Enhanced Navigation -->
    <nav>
        <img src="assets/detailed_ninja_cat_64.png" alt="Pixel Ninja Cats Logo">
        <a href="index.html">Mint</a>
        <a href="lore.html">Lore</a>
        <a href="whitepaper.html">Whitepaper</a>
        <a href="my-kitties.html">My Kitties</a>
        <a href="all-kitties.html">Gallery</a>
        <a href="marketplace.html">Marketplace</a>
        <div class="spacer"></div>
        <button id="connectBtn" class="btn btn-primary btn-md">Connect Wallet</button>
    </nav>

    <div class="wrapper">
        <!-- Enhanced Hero Section -->
        <header class="hero">
            <img src="assets/detailed_ninja_cat_64.png" alt="Pixel Ninja Cat">
            <h1>Pixel Ninja Cats</h1>
            <h2>Summon your stealthy on-chain companion</h2>
            <p>Each Ninja Cat is uniquely generated on-chain with its own special attributes, colors, and ninja abilities.</p>
        </header>

        <!-- Recently Minted Section -->
        <section class="recently-minted">
            <h3>Recently Minted Ninjas</h3>
            <div class="carousel-container">
            <button class="carousel-nav btn btn-icon btn-secondary" id="prevBtn" aria-label="Previous ninja">❮</button>
                <div class="carousel" id="recentlyMinted">
                    <!-- Content will be populated by JavaScript -->
                    <div class="nft-item">
                        <img src="assets/token-placeholder.png" alt="Mint your own">
                        <p>Be the first to mint a Ninja Cat!</p>
                        <div id="carouselError">Error: ethers is not defined</div>
                    </div>
                </div>
                <button class="carousel-nav btn btn-icon btn-secondary" id="nextBtn" aria-label="Next ninja">❯</button>
            </div>
        </section>

        <!-- AI Notice -->
        <div class="ai-notice">
            <strong>AI Generation Notice:</strong> All Pixel Ninja Cat imagery is completely randomly generated using advanced AI models. Each NFT is unique and algorithmically created at the moment of minting, making your ninja cat truly one-of-a-kind.
        </div>

        <!-- Steps -->
        <ol class="steps">
            <li><strong>1</strong> Choose your breed</li>
            <li><strong>2</strong> Connect your wallet</li>
            <li><strong>3</strong> Mint your unique ninja cat</li>
        </ol>

        <!-- Enhanced Mint Card -->
        <div class="card mint-card">
            <label for="breedSelect">Choose your cat's breed</label>
            <select id="breedSelect" class="breed-select" aria-describedby="breed-info">
                <option value="Bengal">Bengal</option>
                <option value="Siamese">Siamese</option>
                <option value="Maine Coon">Maine Coon</option>
                <option value="Calico">Calico</option>
                <option value="Sphynx">Sphynx</option>
                <option value="Shadow">Shadow</option>
                <option value="Nyan">Nyan</option>
                <option value="Persian">Persian</option>
                <option value="Bombay">Bombay</option>
                <option value="Tabby">Tabby</option>
            </select>

            <label for="providerSelect">Choose AI image provider</label>
            <select id="providerSelect" class="provider-select" aria-describedby="provider-info">
                <option value="dall-e">DALL-E 3 (OpenAI)</option>
                <option value="stability">Stability AI (SDXL)</option>
                <option value="huggingface">HuggingFace (Free)</option>
            </select>

            <label for="customPrompt">Custom prompt details (optional)</label>
            <textarea id="customPrompt" placeholder="Add specific details for your ninja cat..." rows="3" aria-describedby="prompt-help"></textarea>

            <button class="btn btn-secondary toggle-advanced" id="advancedBtn" aria-expanded="false">
                Advanced Options ▼
            </button>

            <div class="options-drawer" id="advancedOptions">
                <!-- Advanced options content will be populated by JavaScript -->
            </div>

            <div class="trait-preview">
                <p>Select traits to see preview</p>
            </div>

            <!-- Provider Information -->
            <div class="provider-info" id="provider-info">
                <h4>DALL-E 3</h4>
                <p>OpenAI's most advanced image generation model. Creates highly detailed pixel ninja cats with excellent composition and character design.</p>
                <div class="pros-cons">
                    <div>
                        <h5>Pros</h5>
                        <ul>
                            <li>High quality images</li>
                            <li>Best text comprehension</li>
                            <li>Consistent style</li>
                        </ul>
                    </div>
                    <div>
                        <h5>Cons</h5>
                        <ul>
                            <li>May be slower</li>
                            <li>Higher cost</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Breed Information -->
            <div class="breed-info" id="breed-info">
                <h4>Bengal Ninja</h4>
                <p>The stealthy Bengal ninjas are known for their spotted patterns and exceptional agility. They excel at infiltration missions and can leap across great distances silently.</p>
            </div>

            <!-- Price Display -->
            <div class="price-display">
                <div class="price" id="priceDisplay">Fetching price…</div>
                <div class="exchange">
                    ≈ <span id="vtruAmount">--</span> VTRU
                </div>
                <div class="exchange">
                    1 VTRU = <span id="usdcRate">--</span> USDC
                </div>
            </div>

            <button class="btn btn-primary btn-lg" id="mintBtn" disabled>
                Mint Your Ninja Cat
            </button>

            <div id="status" role="status" aria-live="polite">
                By minting, you'll receive a completely unique AI-generated Ninja Cat NFT with randomly assigned traits, colors and abilities.
            </div>

            <p class="help-text">
                <small>Keyboard shortcuts: Alt+M to mint</small>
            </p>
        </div>

        <!-- Lore Section -->
        <section class="lore-section">
            <h3>Ninja-Kitty Lore & Trivia</h3>
            <ul>
                <li>Each katana is forged from fallen star-iron that landed during the blockchain genesis event.</li>
                <li>A ninja cat's whiskers can detect incoming gas spikes three blocks before they happen.</li>
                <li>The legendary Shadow breed can phase between the physical and digital realms.</li>
                <li>Nyan cats leave rainbow trails that can be seen on the blockchain explorer.</li>
            </ul>
        </section>
    </div>

    <!-- Enhanced Footer -->
    <footer>
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <img src="assets/detailed_ninja_cat_64.png" alt="Ninja Cat Logo" class="footer-logo">
                    <h3>Pixel Ninja Cats</h3>
                    <p>Collectible digital ninja cat artworks on the blockchain.</p>
                    <div class="stats-grid">
                        <div class="stat">
                            <div class="stat-value">---</div>
                            <div class="stat-label">Total Minted</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">---</div>
                            <div class="stat-label">Next Token ID</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">---</div>
                            <div class="stat-label">Royalty %</div>
                        </div>
                    </div>
                    <div class="contract-status">Status Unknown</div>
                </div>

                <div class="footer-section">
                    <h4>Navigation</h4>
                    <ul class="footer-links">
                        <li><a href="index.html">→ Mint</a></li>
                        <li><a href="lore.html">→ Lore</a></li>
                        <li><a href="whitepaper.html">→ Whitepaper</a></li>
                        <li><a href="my-kitties.html">→ My Kitties</a></li>
                        <li><a href="all-kitties.html">→ Gallery</a></li>
                        <li><a href="marketplace.html">→ Marketplace</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Legal</h4>
                    <ul class="footer-links">
                        <li><a href="disclaimer.html">→ Legal Disclaimer</a></li>
                        <li><a href="terms.html">→ Terms of Use</a></li>
                        <li><a href="privacy.html">→ Privacy Policy</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Connect</h4>
                    <div class="social-links">
                        <a href="https://discord.gg/rpakRNAQn8" class="social-icon" aria-label="Join our Discord">
                            <img src="assets/discord-icon.svg" alt="Discord" width="20" height="20">
                        </a>
                        <a href="https://twitter.com/pixelninjacats" class="social-icon" aria-label="Follow on Twitter">
                            <img src="assets/twitter-icon.svg" alt="Twitter" width="20" height="20">
                        </a>
                    </div>
                </div>
            </div>

            <div class="footer-disclaimer">
                <p>
                    <strong>DISCLAIMER:</strong> Pixel Ninja Cats are purely collectible digital art pieces. They are NOT securities or investments. 
                    <a href="disclaimer.html">Read our full legal disclaimer</a>.
                </p>
            </div>

            <div class="footer-copyright">
                <p>© <span id="current-year">2025</span> Pixel Ninja Cats. All rights reserved.</p>
                <button class="btn btn-ghost btn-sm back-to-top" id="backToTop">
                    <img src="assets/arrow-up.svg" alt="" width="16" height="16">
                    Back to top
                </button>
            </div>
        </div>
    </footer>

    <!-- Enhanced Audio Player (if exists) -->
    <div class="audio-player" id="audioPlayer">
        <!-- Audio player content will be loaded by external script -->
    </div>

    <!-- Scripts -->
    <script src="js/wallet.js"></script>
    <script src="js/mint.js"></script>
    <script src="js/gallery.js"></script>
    <script src="js/audio-player.js"></script>
    
    <!-- Initialize enhanced features -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Update current year
            document.getElementById('current-year').textContent = new Date().getFullYear();
            
            // Back to top functionality
            const backToTopBtn = document.getElementById('backToTop');
            if (backToTopBtn) {
                backToTopBtn.addEventListener('click', function() {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            }
            
            // Advanced options toggle
            const advancedBtn = document.getElementById('advancedBtn');
            const advancedOptions = document.getElementById('advancedOptions');
            if (advancedBtn && advancedOptions) {
                advancedBtn.addEventListener('click', function() {
                    advancedOptions.classList.toggle('open');
                    const isOpen = advancedOptions.classList.contains('open');
                    advancedBtn.textContent = `Advanced Options ${isOpen ? '▲' : '▼'}`;
                    advancedBtn.setAttribute('aria-expanded', isOpen);
                });
            }
            
            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                if (e.altKey && e.key === 'm') {
                    e.preventDefault();
                    const mintBtn = document.getElementById('mintBtn');
                    if (mintBtn && !mintBtn.disabled) {
                        mintBtn.click();
                    }
                }
            });
        });
    </script>
</body>
</html>